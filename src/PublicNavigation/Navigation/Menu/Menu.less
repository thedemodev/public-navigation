@import '~bootstrap/less/variables.less';

@menu-animation-duration: 0.35s;

.tw-public-navigation-menu {
  z-index: 2;

  // overwrite this cool rule from Bootstrap
  .dropdown-menu > li:not(.active):not(.selected) > a:not([disabled]):not(.disabled):active {
    background-color: transparent;
  }

  &.collapse {
    display: initial; // display cannot be animated

    visibility: hidden; // but visibility can
    transition: visibility 0s ease @menu-animation-duration; // to make it invisible after the animation is finished
    &.in {
      visibility: visible;
      transition: visibility 0s ease;
    }

    @media screen and (min-width: @screen-md-min) {
      visibility: visible;
    }
  }

  &__overlay {
    border: 0;
  }

  .navbar-nav > li {
    > a,
    > button {
      font-weight: 600;
      padding-right: 10px;
      padding-left: 10px;
    }
    > .link-callout:after {
      display: none;
    }
  }
  .navbar-btn {
    a {
      text-decoration: none !important;
      transition: color ease @transition-duration;
    }
  }
  .caret {
    font-size: 12px;
  }

  @media (max-width: @screen-sm-max) {
    &.navbar-collapse {
      .navbar-nav {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        > li {
          border-bottom: 1px solid @brand-navy-minus-20;

          > .link-callout:after {
            display: initial;
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
          }

          &:not(.navbar-btn) + .navbar-btn {
            flex-grow: 1;

            display: flex;
            justify-content: center;
            align-items: flex-end;
          }
          &.navbar-btn {
            border-bottom: none;
          }

          a,
          button {
            padding-left: 0;
            padding-right: 0;
          }

          .tw-public-navigation-item-content {
            &__text {
              font-size: @font-size-small;
              max-width: 100vw;
            }
            &__icon svg {
              fill: @brand-white;
            }
          }
        }

        .navbar-btn {
          margin-top: 0;

          a {
            display: block;
            width: 100%;

            &.btn-link {
              background-color: @brand-light-blue;
              border-color: @brand-light-blue;

              &:hover {
                color: #fff;
                background-color: @brand-light-blue-minus-10;
                border-color: @brand-light-blue-minus-10;
              }

              &:active {
                color: #fff;
                background-color: @brand-light-blue-minus-20;
                border-color: @brand-light-blue-minus-20;
              }
            }
          }

          .btn-default,
          .btn-primary {
            margin-left: 0;
          }
        }
      }
      .tw-public-navigation-menu__header {
        border-bottom: 1px solid @brand-navy-minus-20;
      }
    }

    &__sidebar.navbar-collapse-panel {
      background-color: @brand-navy-minus-10;
      max-width: none !important;
      width: 100% !important;
      transform: translateX(-100%);
      padding: 0 @spacer * 2 @spacer * 2 @spacer * 2;
      display: flex;
      flex-direction: column;
    }
  }
  @media (max-width: @screen-sm-max) and (min-width: @screen-sm-min) {
    &__sidebar.navbar-collapse-panel {
      padding: 0 @spacer * 3;
    }
  }

  @media (max-width: 830px) and (min-width: @screen-sm-min) {
    // hide inline badges for a 60px range to make longer translation strings fit
    .navbar-nav > li {
      > button,
      > a {
        .badge {
          display: none;
        }
      }
    }
  }
}
